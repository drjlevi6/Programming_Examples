%!PS%% Dvorak_Book_Cover_Pattern.ps: Draws the pattern on the cover of the score % of a Dvorak choral work. J Levi 9/17/2021%/inch {72 mul} def/width 8 def/shortLeg 64 def             /lsRatio 3 def/theAngle {1 lsRatio atan} def/stripsAtStart 32 def/squareSize 256 def/nStages 10 def/DoStage{	1 1 4											% for each side of the stage's square…	{		pop											% eat the for variable		dup 0 moveto		gsave			dup DoClip			dup DoParallels			closepath			stroke		grestore		1 index 0 moveto		0 0 lineto		stroke		dup 1 lsRatio add mul  0 translate		90 rotate	} for	pop												%eat the argument} def/DoClip											% Set up a triangular clipping area{	dup lsRatio mul 0 rlineto	0 exch rlineto							% eat the argument	closepath	clip	newpath} def/DoParallels					% Draws design's parallels;											% expects triangle's short side as operand{	width div 1 add cvi	% compute number of lines	0	exch							% initialize line's ordinate to 0	{		dup 0 exch moveto		1000 0 rlineto		% Using an index to retrieve actual length												% doesn't work, therefore need to clip											% elsewhere		width add	} repeat	pop} def% Main Routine------------------------------------------------------------------0.5 inch 6 inch translateshortLeg                       % prime pump with triangle's initial short length1 1 nStages{	pop													% eat the for variable	dup DoStage	dup 0 translate	theAngle rotate	0.790569415042094833 mul		%coefficient sqrt(1 + r*r)/(1+r) works only if r = 3 else recalc} forclosepathstrokepopshowpage